









<div ref="streamContainer" class="stream-container">
    <div class="post-list-container post-list-container-shadow">
        <div class="post">
            <div class="post-head-wrapper"
                 style="background-image: url('/2021/02/01/牛气冲天/pic1.jpeg')">
                <div class="post-title">
                    牛气冲天
                    <div class="post-meta">
                        <time datetime="2021-02-01T00:00:00.000Z" itemprop="datePublished">
                            2021-02-01 00:00
                        </time>&nbsp;
                        
                        
                        <i class="material-icons" style="">folder</i>
                        
                        <a href='/categories/Blog/'>Blog</a>
                        
                        
    
                        
                        
                        <i class="material-icons" style="">label</i>
                        
                        <a href='/tags/Blog/'>Blog</a>
                        
                        
                    </div>
                </div>
            </div>
    
            <div class="post-body-wrapper">
                <div class="post-body">
                    <!-- no node -->

<span id="more"></span>

<blockquote>
<p>荣获 2020 年度优秀员工</p>
</blockquote>
<h2 id="年度总结"><a href="#年度总结" class="headerlink" title="年度总结"></a>年度总结</h2><blockquote>
<p>入职公司近 1 年时间，真的收获了许多，感谢所有帮助过我的大佬，感谢努力的自己。</p>
</blockquote>
<div style="text-align: center;">
    <img src="pic2.png" width="50%">
</div>

<h3 id="业务交付"><a href="#业务交付" class="headerlink" title="业务交付"></a>业务交付</h3><p>完成基本的 B 端业务交付工作，包括开发、联调对接、缺陷修复、人员安排、项目管理、技术支持、新人培养。</p>
<p>在这一年中，新接触了一些关于管理方面的工作，保障业务按时交付的情况下，也带着同事们一起提炼一些经验。</p>
<p>比如和同事们一起提炼了 TypeScript 实践经验手册，供其他同事学习。</p>
<p>再者就是下发给同事的抽象能力挑战，提供有效的指导，帮助同事在有限的时间内完成代码抽象及封装。</p>
<h3 id="技术贡献"><a href="#技术贡献" class="headerlink" title="技术贡献"></a>技术贡献</h3><p>技术贡献一直是我在工作中自产的一些挑战任务，为了让工作更有挑战性。</p>
<ul>
<li>来自一些业务交付时所产生的挑战，包括对现有库的缺陷修复、新特性支持、定制特性支持。</li>
<li>业务交付过程中解耦出的通用型组件库、 SDK 。</li>
<li>在代码中运用合理的设计模式来抽象代码、优化代码设计，提供更易维护、更易阅读、更易使用的代码模块。</li>
<li>参与微前端架构设计及调整，涉及开发、构建、 CI/CD （一件很有挑战的事）。</li>
</ul>
<h3 id="TypeScript-推进"><a href="#TypeScript-推进" class="headerlink" title="TypeScript 推进"></a>TypeScript 推进</h3><ul>
<li>推进内部 TypeScript 使用</li>
<li>总结 TypeScript 实践经验</li>
</ul>
<h3 id="标准代码风格"><a href="#标准代码风格" class="headerlink" title="标准代码风格"></a>标准代码风格</h3><p>因为经历了多个业务交付，发现不同业务的代码风格稍有不同，考虑到为了统一风格，则邀请多位同事一同讨论，抽离现有合理规则，定制内部标准。</p>
<p>从而在年底发布内部标准代码风格，支持 JavaScript / TypeScript / Node / Vue 。</p>
<p>学习 TC39 工作组记录会议纪要。</p>
<h3 id="单元测试"><a href="#单元测试" class="headerlink" title="单元测试"></a>单元测试</h3><p>单元测试的编写附属于技术贡献时，以保证代码的稳定性。</p>
<ul>
<li>内部库的单元测试，保证覆盖率 70%+</li>
<li>运用设计模式的抽象代码，提供单元测试</li>
</ul>
<h3 id="技术分享"><a href="#技术分享" class="headerlink" title="技术分享"></a>技术分享</h3><p>共计 2 场技术分享</p>
<ol>
<li><a target="_blank" rel="noopener" href="https://github.com/zongzi531/daily-learning/blob/master/share/TypeScript%20%E7%BB%99%E6%88%91%E4%BB%AC%E5%B8%A6%E6%9D%A5%E4%BA%86%E4%BB%80%E4%B9%88.pdf">《TypeScript 给我们带来了什么》</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/zongzi531/daily-learning/blob/master/share/%E8%BF%BD%E6%B1%82%E4%BC%98%E9%9B%85%E7%9A%84%E4%BB%A3%E7%A0%81.pdf">《追求优雅的代码》</a></li>
</ol>
<h3 id="人才招聘"><a href="#人才招聘" class="headerlink" title="人才招聘"></a>人才招聘</h3><p>负责部门实习生、社招岗位一二面。（面试 20 人左右，入围 5 人左右，具体记不清了，不重要）</p>
<p>在面试过程中，我也在学习，从候选人的身上寻找自己的不足。</p>
<p>比如在面试 CSS 方面，因为我 CSS 方面并不是特别的擅长，所以会需要资料和同事的协助。</p>
<p>我也明白了，我需要如何系统的学习 CSS ，才能凸显我掌握了 CSS 。</p>
<p>所以当在面试 CSS 相关的知识时，可以从各个 CSS Level 级别去阐述 CSS 特性。（这点很重要）</p>
<p>当然，另外的就是前端的基础掌握程度。（这点也很重要）</p>
<p>虽然面试很吃时间，但是或多或少是可以学习到不少东西的，要保持这种心态。</p>
<h3 id="复盘"><a href="#复盘" class="headerlink" title="复盘"></a>复盘</h3><p>这一年，很不错！</p>
<p>比较遗憾的是，没有足够的时间去尝试：</p>
<ul>
<li>可视化</li>
<li>工程化</li>
<li>服务端</li>
</ul>
<p>对于未来的工作规划似乎又有了一些新的想法：</p>
<ul>
<li>继续拓展软件开发领域知识广度</li>
<li>尝试可能性</li>
<li>现在选择一条路走到底还早</li>
</ul>
<h2 id="工程化探索"><a href="#工程化探索" class="headerlink" title="工程化探索"></a>工程化探索</h2><p>恭喜同桌大佬进入蚂蚁金服，向大佬学习的心日益强烈！</p>
<p>春节前除了保证业务的正常交付，开始交接工程化相关的项目，慢慢开始介入 CI/CD 相关工作。</p>
<p>其实发现关于前端工程化 + CI 形成前端自动工程化与 CD 组合是一件很富有挑战性的工作。</p>
<p>光前端工程化就有很多库、知识可以学习，非常的兴奋。</p>
<p>CI/CD 则会与服务端的同学进行配合，同时又可以学习到服务端的相关知识，慢慢的对服务端也有更多的了解和认识。</p>
<p>在维护 Webpack 插件时，利用 <a target="_blank" rel="noopener" href="https://github.com/zahorovskyi/webpack-dynamic-public-path">Dynamic Public Path Plugin</a> 的思路解决现有 <code>publicPath</code> 存在的问题。</p>
<p>因为是一个微前端架构的 SPA 工程打包为多页面的工程思路，配合后端路由寻址，所以 <code>publicPath</code> 需要为动态，刚好这个开源的插件给我了灵感：</p>
<pre class="line-numbers language-javascript"><code class="language-javascript"><span class="token string">'use strict'</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">WebpackDynamicPublicPath</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>

    <span class="token comment" spellcheck="true">/**
     *
     * @param &amp;#123;Object&amp;#125; options
     * @param &amp;#123;string&amp;#125; options.externalPublicPath - variable with new publicPath
     * @param &amp;#123;Array&lt;string>&amp;#125; [options.chunkNames] - list of chuck names in which publicPath will be replaced,
     * in case if parameter is not defined publicPath will be replaced for all chunks
     */</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>options <span class="token operator">=</span> options<span class="token punctuation">;</span>

        <span class="token keyword">this</span><span class="token punctuation">.</span>afterPlugins <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>afterPlugins<span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>emit <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>emit<span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>

    <span class="token function">apply</span><span class="token punctuation">(</span>compiler<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        compiler<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>afterPlugins<span class="token punctuation">.</span><span class="token function">tap</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>name<span class="token punctuation">:</span> <span class="token string">'WebpackDynamicPublicPath'</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>afterPlugins<span class="token punctuation">)</span><span class="token punctuation">;</span>
        compiler<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>emit<span class="token punctuation">.</span><span class="token function">tapPromise</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>name<span class="token punctuation">:</span> <span class="token string">'WebpackDynamicPublicPath'</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>emit<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>

    <span class="token function">afterPlugins</span><span class="token punctuation">(</span>compilation<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> compilation<span class="token punctuation">.</span>options<span class="token punctuation">.</span>output <span class="token operator">===</span> <span class="token string">'undefined'</span> <span class="token operator">||</span> <span class="token keyword">typeof</span> compilation<span class="token punctuation">.</span>options<span class="token punctuation">.</span>output<span class="token punctuation">.</span>publicPath <span class="token operator">===</span> <span class="token string">'undefined'</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'WebpackDynamicPublicPath: params missing - output.publicPath must be defined in webpack config (used only as placeholder, make it distinctive)'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> <span class="token keyword">this</span><span class="token punctuation">.</span>options <span class="token operator">===</span> <span class="token string">'undefined'</span> <span class="token operator">||</span> <span class="token keyword">typeof</span> <span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>externalPublicPath <span class="token operator">===</span> <span class="token string">'undefined'</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`WebpackDynamicPublicPath: params missing - externalPublicPath - name of global variable you want to use as publicPath.`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>

        <span class="token keyword">this</span><span class="token punctuation">.</span>publicPath <span class="token operator">=</span> <span class="token template-string"><span class="token string">`"$&amp;#123;compilation.options.output.publicPath&amp;#125;"`</span></span><span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>

    <span class="token function">emit</span><span class="token punctuation">(</span>compilation<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token keyword">const</span> chunks <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>chunkNames <span class="token operator">?</span>
            compilation<span class="token punctuation">.</span>chunks<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>chunk <span class="token operator">=</span><span class="token operator">></span> <span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>chunkNames<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>chunk<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">:</span>
            compilation<span class="token punctuation">.</span>chunks<span class="token punctuation">;</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>chunks<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'WebpackDynamicPublicPath: chunks array for replacing publicPath is empty.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>

        <span class="token keyword">const</span> fileNames <span class="token operator">=</span> chunks<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>
            chunk <span class="token operator">=</span><span class="token operator">></span> chunk<span class="token punctuation">.</span>files<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>
                file <span class="token operator">=</span><span class="token operator">></span> file<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex">/.*\.js/</span><span class="token punctuation">)</span>
            <span class="token punctuation">)</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">const</span> replacePromises <span class="token operator">=</span> fileNames<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>fileName <span class="token operator">=</span><span class="token operator">></span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">replacePublicPath</span><span class="token punctuation">(</span>fileName<span class="token punctuation">,</span> compilation<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span>replacePromises<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'WebpackDynamicPublicPath: publicPath replaced.'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>

    <span class="token comment" spellcheck="true">/**
     * Replace publicPath
     * @param &amp;#123;string&amp;#125; fileName
     * @param &amp;#123;object&amp;#125; compilation
     * @return &amp;#123;Promise&lt;any>&amp;#125;
     */</span>
    <span class="token function">replacePublicPath</span><span class="token punctuation">(</span>fileName<span class="token punctuation">,</span> compilation<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span>resolve<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
            <span class="token keyword">const</span> source <span class="token operator">=</span> compilation<span class="token punctuation">.</span>assets<span class="token punctuation">[</span>fileName<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">source</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">const</span> publicPath <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>publicPath<span class="token punctuation">;</span>
            <span class="token keyword">const</span> externalPublicPath <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>externalPublicPath<span class="token punctuation">;</span>

            compilation<span class="token punctuation">.</span>assets<span class="token punctuation">[</span>fileName<span class="token punctuation">]</span><span class="token punctuation">.</span>source <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
                <span class="token keyword">return</span> source<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>publicPath<span class="token punctuation">,</span> externalPublicPath<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">;</span>

            <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>


module<span class="token punctuation">.</span>exports <span class="token operator">=</span> WebpackDynamicPublicPath<span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>源码很简单，我就复制过来凑凑字数，内部的细节我就不做展示，逻辑我在这里介绍一下。</p>
<p>利用环境变量配置，提供公共的 <code>publicPath</code> 前缀，获取需要被拆分的页面模块名称，拼接特定的 <code>publicPath</code> 内容。</p>

                </div>
            </div>

            
            
            
    
            
    
            
        </div>
    </div>
    
</div>






