---
title: 调优 Agent 和产品体验
date: 2025-10-01 09:23:01
categories: "JavaScript"
comments: true
featured_image: pic1.jpg
tags:
- LLM
- Agent
- 优化
---

<!-- no node  -->

<!-- more -->

## 调优 Agent

这其实是一个漫长的过长，通过对 Agent 的调用进行记录，然后逐个回放 Agent 的 Prompt 消息以及上下文来进行优化，优化每一次模型调用和上下文流转的过程。

也没有什么特别的捷径，从完善 Prompt 到完善 Prompt ，书写 Good Case ，同时也要书写 Bad Case ，以避免出现过的错误。

不过目前的设计当中存在一些优化点还没有做，当 Agent 进入到生成代码时，目前采用的方式是 CoT 方式，虽然做优化也还是 CoT 的方式。

只不过目前的 CoT 较长，会消耗较多的不必要 Token ，计划根据 TODO 的内容，将 TODO 进行分块，然后逐个进行 CoT 执行。

对 TODO 进行分块，或许还会涉及到 Agent 具备记忆的能力，并且在做 TODO 分块时可以将任务拆分成项目活动图 (PERT) 来进行执行，可实现任务的并行执行，减少整体的执行时间。

或许这样 Token 会有所减少（不一定噢，也有可能 Token 差不多，但是费用降低），但是目前还未尝试（是一个比较值得挑战的尝试），而且在进行需求文档、UI设计文档都能尝试这样的思路进行。

另外一个，目前 Agent 其实对于用户表述“继续”这个关键词并没有很好的处理，因为大部分的任务都是以单次为节点完成的（或许单节点的任务完成是模型幻觉），不太会出现需要输入“继续”的场景，不过在用户使用过程中有用户出现了这样的逻辑交互，所以在一些边界逻辑上还需要一些补全或者备用方案（待思考）。

## 调优产品体验

从功能交互上，让用户觉得 AI 的思考过程更为透明，更能够被控制，在大部分环节将 Agent 的信息暴露给用户，并且给到用户决策和修改的权力，模仿市面上优秀的产品， UI 界面也随之跳转和变动，让用户感觉真的像是有个人在操作的这种体验感。

WebContainer 这一侧，也是让模型避免了一些不必要的植入代码读取，将内容都移入到了 Vite 插件内。

尽可能的优化工程的体积，并附加工程的说明（ `rules` ），让 Agent 执行时获得更准确的信息，让 Agent 明白如何修改代码。

以及一些产品侧的功能补充，让整个产品流程从普通用户到管理员都有相应的合理的操作空间。

因为产品计划在节前发版更新，所以更多的侧重在调优和打磨细节（生成效果）。

并且可以使用司内的组件库，让生成效果更轻松的符合司内 UI 设计标准。

再一个就是目前设计的对话任务是前台的任务模式，对话一但开始用户则不能离开当前对话界面，如果离开则会停止，这其实是在设计之初没有考虑到的，不过将 Agent 的任务放到后台处理也是比较轻松的事情，优化后，用户就可以后续再来查看生成的效果，而无需一定要停留在对话界面的问题。

所以持续打磨吧！~
